<Window x:Class="BadBoys.Presentation.WPF.Views.EditMediaWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Edit Media" 
        Height="650" 
        Width="600"
        WindowStartupLocation="CenterOwner"
        MinHeight="500" MinWidth="500">
    
    <Window.Resources>
        <Style TargetType="TextBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Margin" Value="5"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
        </Style>
        <Style TargetType="Label">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="5,0"/>
        </Style>
    </Window.Resources>
    
    <Grid Margin="10">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- TITLE -->
                <Label Grid.Row="0" Grid.Column="0" Content="Title:*"/>
                <TextBox Grid.Row="0" Grid.Column="1" 
                         Text="{Binding Title, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
                
                <!-- TYPE -->
                <Label Grid.Row="1" Grid.Column="0" Content="Type:"/>
                <ComboBox Grid.Row="1" Grid.Column="1" 
                          ItemsSource="{Binding MediaTypes}"
                          SelectedItem="{Binding Type}"/>
                
                <!-- YEAR -->
                <Label Grid.Row="2" Grid.Column="0" Content="Year:"/>
                <TextBox Grid.Row="2" Grid.Column="1" 
                         Text="{Binding Year, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding SaveCommand}"/>
                    </TextBox.InputBindings>
                </TextBox>
                
                <!-- GENRE -->
                <Label Grid.Row="3" Grid.Column="0" Content="Genre:"/>
                <TextBox Grid.Row="3" Grid.Column="1" 
                         Text="{Binding Genre, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- AUTHOR -->
                <Label Grid.Row="4" Grid.Column="0" Content="Author:"/>
                <TextBox Grid.Row="4" Grid.Column="1" 
                         Text="{Binding Author, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- PUBLISHER -->
                <Label Grid.Row="5" Grid.Column="0" Content="Publisher:"/>
                <TextBox Grid.Row="5" Grid.Column="1" 
                         Text="{Binding Publisher, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- STATUS -->
                <Label Grid.Row="6" Grid.Column="0" Content="Status:"/>
                <ComboBox Grid.Row="6" Grid.Column="1" 
                          ItemsSource="{Binding StatusTypes}"
                          SelectedItem="{Binding Status}"/>
                
                <!-- RATING -->
                <Label Grid.Row="7" Grid.Column="0" Content="Rating:"/>
                <TextBox Grid.Row="7" Grid.Column="1" 
                         Text="{Binding Rating, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"/>
                
                <!-- DURATION/PAGES/TRACKS (Context sensitive) -->
                <Label Grid.Row="8" Grid.Column="0" Content="Duration (min):"/>
                <TextBox Grid.Row="8" Grid.Column="1" 
                         Text="{Binding DurationMinutes, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- COVER IMAGE -->
                <Label Grid.Row="9" Grid.Column="0" Content="Cover Image:"/>
                <DockPanel Grid.Row="9" Grid.Column="1" LastChildFill="True">
                    <Button DockPanel.Dock="Right" Content="Browse" 
                            Command="{Binding BrowseImageCommand}" Width="60" Margin="5,0,0,0"/>
                    <TextBox Text="{Binding CoverImagePath, UpdateSourceTrigger=PropertyChanged}"/>
                </DockPanel>
                
                <!-- TAGS -->
                <Label Grid.Row="10" Grid.Column="0" Content="Tags:"/>
                <DockPanel Grid.Row="10" Grid.Column="1" LastChildFill="True">
                    <Button DockPanel.Dock="Right" Content="Add" 
                            Command="{Binding AddTagCommand}" Width="60" Margin="5,0,0,0"/>
                    <TextBox Text="{Binding NewTag, UpdateSourceTrigger=PropertyChanged}"/>
                </DockPanel>
                
                <!-- TAGS LIST -->
                <Label Grid.Row="11" Grid.Column="0" Content=""/>
                <ItemsControl Grid.Row="11" Grid.Column="1" ItemsSource="{Binding Tags}" Margin="5">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border BorderBrush="LightGray" BorderThickness="1" CornerRadius="3" 
                                    Margin="0,2" Padding="5,2" Background="#F0F0F0">
                                <DockPanel>
                                    <Button DockPanel.Dock="Right" Content="X" 
                                            Command="{Binding DataContext.RemoveTagCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                            CommandParameter="{Binding}"
                                            Width="20" Height="20" Padding="0" FontSize="10"/>
                                    <TextBlock Text="{Binding}" VerticalAlignment="Center" Margin="0,0,5,0"/>
                                </DockPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
                
                <!-- DESCRIPTION -->
                <Label Grid.Row="12" Grid.Column="0" Content="Description:" VerticalAlignment="Top"/>
                <TextBox Grid.Row="12" Grid.Column="1" 
                         AcceptsReturn="True" Height="80" TextWrapping="Wrap"
                         Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- PERSONAL NOTES -->
                <Label Grid.Row="13" Grid.Column="0" Content="Personal Notes:" VerticalAlignment="Top"/>
                <TextBox Grid.Row="13" Grid.Column="1" 
                         AcceptsReturn="True" Height="80" TextWrapping="Wrap"
                         Text="{Binding PersonalNotes, UpdateSourceTrigger=PropertyChanged}"/>
                
                <!-- BUTTONS -->
                <Border Grid.Row="14" Grid.ColumnSpan="2" BorderBrush="LightGray" 
                        BorderThickness="0,1,0,0" Margin="0,20,0,10" Padding="0,10,0,0">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                        <Button Content="Save" Width="80" Margin="5" 
                                Command="{Binding SaveCommand}" IsDefault="True"/>
                        <Button Content="Cancel" Width="80" Margin="5" 
                                Command="{Binding CancelCommand}" IsCancel="True"/>
                    </StackPanel>
                </Border>
                
            </Grid>
        </ScrollViewer>
    </Grid>
</Window>
